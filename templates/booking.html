<!-- booking.html -->
{% extends 'base.html' %}
{% set show_navbar = true %}
{% block content %}

<h1 class="booking__title">Booking â€” {{ movie.title }}</h1>

<div class="booking-details">
    
    <!-- Poster -->
    <img class="booking-details__poster" src="{{ movie.poster }}">

    <!-- Booking Form -->
    <div class="booking-details__form">
        <label class="booking-form__label">Date:</label>
        <input id="dateInput" type="date" class="booking-form__input">

        <label class="booking-form__label" style="margin-top: 20px;">Showtime:</label>
        <div class="booking-form__showtimes">
            {% for show in showtimes %}
            <button class="booking-form__showtime" data-time="{{ show.time }}" data-available="{{ show.available }}">{{ show.time }} ({{ show.available }} seats)</button>
            {% endfor %}
        </div>

        <label class="booking-form__label" style="margin-top: 20px;">Quantity:</label>
        <input id="quantityInput" type="number" class="booking-form__input" min="1">

        <button class="booking-form__button booking-form__button--confirm" id="confirmBtn">Confirm Booking</button>
        <button class="booking-form__button booking-form__button--cancel">Cancel</button>
        <p class="booking-form__message" id="bookingMessage"></p>
    </div>

</div>

<div id="bookingData"
     data-current-user="{{ current_username or '' }}"
     data-existing-booking='{{ existing_booking | tojson | default("null") }}'
     data-movie-title="{{ movie.title }}">
</div>
{% endblock %}
